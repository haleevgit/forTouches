System.register("chunks:///_virtual/main",["./TouchCatcher.ts"],(function(){"use strict";return{setters:[null],execute:function(){}}}));

System.register("chunks:///_virtual/TouchCatcher.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,a,s,r,c,h,d,y,u,p,m,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Camera,c=t.input,h=t.Input,d=t.KeyCode,y=t.Vec3,u=t.tween,p=t.Quat,m=t.Vec4,_=t.Component}],execute:function(){var E,l,T,D,f,v,M;t({ButtonTypes:void 0,State:void 0}),a._RF.push({},"8604d6rwGxFLY7qPjbtMGE4","TouchCatcher",void 0);var S,w,b=s.ccclass,B=s.property;!function(t){t[t.DISABLED=0]="DISABLED",t[t.HOVER=1]="HOVER",t[t.FIRST_FACE=2]="FIRST_FACE"}(S||(S=t("State",{}))),function(t){t[t.LEFT=0]="LEFT",t[t.NONE=1]="NONE",t[t.RIGHT=2]="RIGHT"}(w||(w=t("ButtonTypes",{})));t("TouchCatcher",(E=b("TouchCatcher"),l=B(r),E((f=e((D=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(e,"camera",f,n(e)),i(e,"sensitivity",v,n(e)),i(e,"keyboardVelocity",M,n(e)),e._typeButton=w.NONE,e._cameraMode=S.HOVER,e._keyButtonPressed=null,e._possibleKeys=[d.KEY_W,d.KEY_S,d.KEY_A,d.KEY_D],e._keyboardVelocity=void 0,e}o(e,t);var a=e.prototype;return a.onLoad=function(){c.on(h.EventType.TOUCH_START,this.onTouchStart,this),c.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),c.on(h.EventType.TOUCH_END,this.onTouchEnd,this),c.on(h.EventType.TOUCH_CANCEL,this.onTouchCancel,this),c.on(h.EventType.MOUSE_WHEEL,this.onMouseWheel,this),c.on(h.EventType.MOUSE_MOVE,this.onMouseMove,this),c.on(h.EventType.MOUSE_DOWN,this.onMouseDown,this),c.on(h.EventType.MOUSE_UP,this.onMouseUp,this),c.on(h.EventType.KEY_DOWN,this.onKeyDown,this),c.on(h.EventType.KEY_UP,this.onKeyUp,this),this._keyboardVelocity=1/this.keyboardVelocity},a.update=function(){this._keyButtonPressed&&this._keyboardMoving()},a.onDestroy=function(){c.off(h.EventType.TOUCH_START,this.onTouchStart,this),c.off(h.EventType.KEY_DOWN,this.onKeyDown,this),c.off(h.EventType.KEY_UP,this.onKeyUp,this)},a._keyboardMoving=function(){switch(this._keyButtonPressed){case d.KEY_W:this.camera.node.position=new y(this.camera.node.position.x,this.camera.node.position.y,this.camera.node.position.z-this._keyboardVelocity);break;case d.KEY_D:this.camera.node.position=new y(this.camera.node.position.x+this._keyboardVelocity,this.camera.node.position.y,this.camera.node.position.z);break;case d.KEY_A:this.camera.node.position=new y(this.camera.node.position.x-this._keyboardVelocity,this.camera.node.position.y,this.camera.node.position.z);break;case d.KEY_S:this.camera.node.position=new y(this.camera.node.position.x,this.camera.node.position.y,this.camera.node.position.z+this._keyboardVelocity)}},a._transition=function(t){var e=this;switch(this._cameraMode=S.DISABLED,t){case S.HOVER:u(this.camera.node).to(1,{rotation:new p(-.3,this.camera.node.rotation.y,this.camera.node.rotation.z,this.camera.node.rotation.w)}).call((function(){e._cameraMode=S.HOVER})).start(),u(this.camera.node).to(1,{position:new y(this.camera.node.position.x,10,this.camera.node.position.z)}).start();break;case S.FIRST_FACE:u(this.camera.node).to(1,{rotation:new p(0,this.camera.node.rotation.y,this.camera.node.rotation.z,this.camera.node.rotation.w)}).call((function(){e._cameraMode=S.FIRST_FACE})).start(),u(this.camera.node).to(1,{position:new y(this.camera.node.position.x,this.camera.node.position.y-2,this.camera.node.position.z)}).start()}},a.onTouchStart=function(t){this._cameraMode,S.DISABLED},a.onTouchMove=function(t){if(this._cameraMode!==S.DISABLED&&this._typeButton!==w.RIGHT){if(this._cameraMode===S.HOVER){var e=t.getTouches();if(e.length<2)this.camera.node.position=new y(this.camera.node.position.x-t.getDeltaX()/100,this.camera.node.position.y,this.camera.node.position.z+t.getDeltaY()/100);else{this.camera.node.position=new y(1e8,this.camera.node.position.y,this.camera.node.position.z+t.getDeltaY()/100);var o=e[0].getLocation(),i=e[1].getLocation(),n=o.clone().subtract(i).length();console.log(n)}}this._cameraMode===S.FIRST_FACE&&(this.camera.node.position=new y(this.camera.node.position.x,this.camera.node.position.y,this.camera.node.position.z+t.getDeltaY()/100),this.camera.node.rotation=new m(this.camera.node.rotation.x,this.camera.node.rotation.y-t.getDeltaX()/this.sensitivity,this.camera.node.rotation.z,this.camera.node.rotation.w))}},a.onTouchEnd=function(t){this._cameraMode,S.DISABLED},a.onTouchCancel=function(t){this._cameraMode,S.DISABLED},a.onMouseWheel=function(t){this._cameraMode!==S.DISABLED&&(this.camera.node.position=new y(this.camera.node.position.x,this.camera.node.position.y-t.getScrollY()/this.sensitivity,this.camera.node.position.z),this.camera.node.position.y<2&&this._cameraMode===S.HOVER&&this._transition(S.FIRST_FACE),this.camera.node.position.y>3&&this._cameraMode===S.FIRST_FACE&&this._transition(S.HOVER))},a.onMouseMove=function(t){this._cameraMode!==S.DISABLED&&(this._typeButton===w.RIGHT&&(this.camera.node.rotation=new m(this.camera.node.rotation.x,this.camera.node.rotation.y+t.getDeltaX()/this.sensitivity,this.camera.node.rotation.z,this.camera.node.rotation.w)),this._typeButton===w.NONE&&this._cameraMode===S.FIRST_FACE&&(this.camera.node.rotation=new m(this.camera.node.rotation.x+t.getDeltaY()/this.sensitivity,this.camera.node.rotation.y-t.getDeltaX()/this.sensitivity,this.camera.node.rotation.z,this.camera.node.rotation.w)))},a.onMouseDown=function(t){this._cameraMode!==S.DISABLED&&(this._typeButton=t.getButton())},a.onMouseUp=function(t){this._cameraMode!==S.DISABLED&&(this._typeButton=w.NONE)},a.onKeyDown=function(t){this._possibleKeys.includes(t.keyCode)&&(this._keyButtonPressed||(this._keyButtonPressed=t.keyCode))},a.onKeyUp=function(t){this._keyButtonPressed===t.keyCode&&(this._keyButtonPressed=null)},e}(_)).prototype,"camera",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(D.prototype,"sensitivity",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),M=e(D.prototype,"keyboardVelocity",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e11}}),T=D))||T));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map